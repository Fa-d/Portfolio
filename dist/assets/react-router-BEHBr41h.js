import{a as m,_ as y,b as H}from"./@babel-OEIDM1DX.js";import{R as h}from"./react-DuhvRMww.js";import{P as A}from"./prop-types-DEWykvgW.js";import{c as b,a as X,l as z,b as J}from"./history-pbnTe7_v.js";import{i as C}from"./tiny-invariant-BaFNuDhB.js";import{p as j}from"./path-to-regexp-Dl5z1zgB.js";import"./react-is-8JwjhRSi.js";import{h as Q}from"./hoist-non-react-statics-CRkQn3k-.js";var M=1073741823,T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function Y(){var t="__global_unique_id__";return T[t]=(T[t]||0)+1}function Z(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function k(t){var e=[];return{on:function(r){e.push(r)},off:function(r){e=e.filter(function(n){return n!==r})},get:function(){return t},set:function(r,n){t=r,e.forEach(function(a){return a(t,n)})}}}function tt(t){return Array.isArray(t)?t[0]:t}function et(t,e){var o,r,n="__create-react-context-"+Y()+"__",a=function(p){m(c,p);function c(){for(var i,l=arguments.length,f=new Array(l),v=0;v<l;v++)f[v]=arguments[v];return i=p.call.apply(p,[this].concat(f))||this,i.emitter=k(i.props.value),i}var u=c.prototype;return u.getChildContext=function(){var l;return l={},l[n]=this.emitter,l},u.componentWillReceiveProps=function(l){if(this.props.value!==l.value){var f=this.props.value,v=l.value,d;Z(f,v)?d=0:(d=typeof e=="function"?e(f,v):M,d|=0,d!==0&&this.emitter.set(l.value,d))}},u.render=function(){return this.props.children},c}(h.Component);a.childContextTypes=(o={},o[n]=A.object.isRequired,o);var s=function(p){m(c,p);function c(){for(var i,l=arguments.length,f=new Array(l),v=0;v<l;v++)f[v]=arguments[v];return i=p.call.apply(p,[this].concat(f))||this,i.observedBits=void 0,i.state={value:i.getValue()},i.onUpdate=function(d,_){var x=i.observedBits|0;x&_&&i.setState({value:i.getValue()})},i}var u=c.prototype;return u.componentWillReceiveProps=function(l){var f=l.observedBits;this.observedBits=f??M},u.componentDidMount=function(){this.context[n]&&this.context[n].on(this.onUpdate);var l=this.props.observedBits;this.observedBits=l??M},u.componentWillUnmount=function(){this.context[n]&&this.context[n].off(this.onUpdate)},u.getValue=function(){return this.context[n]?this.context[n].get():t},u.render=function(){return tt(this.props.children)(this.state.value)},c}(h.Component);return s.contextTypes=(r={},r[n]=A.object,r),{Provider:a,Consumer:s}}var nt=h.createContext||et,I=function(e){var o=nt();return o.displayName=e,o},q=I("Router-History"),g=I("Router"),V=function(t){m(e,t),e.computeRootMatch=function(n){return{path:"/",url:"/",params:{},isExact:n==="/"}};function e(r){var n;return n=t.call(this,r)||this,n.state={location:r.history.location},n._isMounted=!1,n._pendingLocation=null,r.staticContext||(n.unlisten=r.history.listen(function(a){n._pendingLocation=a})),n}var o=e.prototype;return o.componentDidMount=function(){var n=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(a){n._isMounted&&n.setState({location:a})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},o.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},o.render=function(){return h.createElement(g.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},h.createElement(q.Provider,{children:this.props.children||null,value:this.props.history}))},e}(h.Component);h.Component;var rt=function(t){m(e,t);function e(){return t.apply(this,arguments)||this}var o=e.prototype;return o.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},o.componentDidUpdate=function(n){this.props.onUpdate&&this.props.onUpdate.call(this,this,n)},o.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},o.render=function(){return null},e}(h.Component),P={},ot=1e4,W=0;function it(t){if(P[t])return P[t];var e=j.compile(t);return W<ot&&(P[t]=e,W++),e}function S(t,e){return t===void 0&&(t="/"),e===void 0&&(e={}),t==="/"?t:it(t)(e,{pretty:!0})}function Ct(t){var e=t.computedMatch,o=t.to,r=t.push,n=r===void 0?!1:r;return h.createElement(g.Consumer,null,function(a){a||C();var s=a.history,p=a.staticContext,c=n?s.push:s.replace,u=b(e?typeof o=="string"?S(o,e.params):y({},o,{pathname:S(o.pathname,e.params)}):o);return p?(c(u),null):h.createElement(rt,{onMount:function(){c(u)},onUpdate:function(l,f){var v=b(f.to);z(v,y({},u,{key:v.key}))||c(u)},to:o})})}var B={},at=1e4,D=0;function st(t,e){var o=""+e.end+e.strict+e.sensitive,r=B[o]||(B[o]={});if(r[t])return r[t];var n=[],a=j(t,n,e),s={regexp:a,keys:n};return D<at&&(r[t]=s,D++),s}function G(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var o=e,r=o.path,n=o.exact,a=n===void 0?!1:n,s=o.strict,p=s===void 0?!1:s,c=o.sensitive,u=c===void 0?!1:c,i=[].concat(r);return i.reduce(function(l,f){if(!f&&f!=="")return null;if(l)return l;var v=st(f,{end:a,strict:p,sensitive:u}),d=v.regexp,_=v.keys,x=d.exec(t);if(!x)return null;var E=x[0],O=x.slice(1),L=t===E;return a&&!L?null:{path:f,url:f==="/"&&E===""?"/":E,isExact:L,params:_.reduce(function(w,F,K){return w[F.name]=O[K],w},{})}},null)}function ut(t){return h.Children.count(t)===0}var bt=function(t){m(e,t);function e(){return t.apply(this,arguments)||this}var o=e.prototype;return o.render=function(){var n=this;return h.createElement(g.Consumer,null,function(a){a||C();var s=n.props.location||a.location,p=n.props.computedMatch?n.props.computedMatch:n.props.path?G(s.pathname,n.props):a.match,c=y({},a,{location:s,match:p}),u=n.props,i=u.children,l=u.component,f=u.render;return Array.isArray(i)&&ut(i)&&(i=null),h.createElement(g.Provider,{value:c},c.match?i?typeof i=="function"?i(c):i:l?h.createElement(l,c):f?f(c):null:typeof i=="function"?i(c):null)})},e}(h.Component);function R(t){return t.charAt(0)==="/"?t:"/"+t}function ct(t,e){return t?y({},e,{pathname:R(t)+e.pathname}):e}function pt(t,e){if(!t)return e;var o=R(t);return e.pathname.indexOf(o)!==0?e:y({},e,{pathname:e.pathname.substr(o.length)})}function N(t){return typeof t=="string"?t:J(t)}function U(t){return function(){C()}}function $(){}h.Component;var _t=function(t){m(e,t);function e(){return t.apply(this,arguments)||this}var o=e.prototype;return o.render=function(){var n=this;return h.createElement(g.Consumer,null,function(a){a||C();var s=n.props.location||a.location,p,c;return h.Children.forEach(n.props.children,function(u){if(c==null&&h.isValidElement(u)){p=u;var i=u.props.path||u.props.from;c=i?G(s.pathname,y({},u.props,{path:i})):a.match}}),c?h.cloneElement(p,{location:s,computedMatch:c}):null})},e}(h.Component);function Et(t){var e="withRouter("+(t.displayName||t.name)+")",o=function(n){var a=n.wrappedComponentRef,s=H(n,["wrappedComponentRef"]);return h.createElement(g.Consumer,null,function(p){return p||C(),h.createElement(t,y({},s,p,{ref:a}))})};return o.displayName=e,o.WrappedComponent=t,Q(o,t)}var lt=h.useContext;function Mt(){return lt(q)}export{V as R,_t as S,bt as a,Ct as b,g as c,G as m,Mt as u,Et as w};
