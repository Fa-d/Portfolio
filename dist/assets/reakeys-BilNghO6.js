import{r as o}from"./react-BM9L5BSm.js";import{$ as f}from"./ctrl-keys-DJ-dQzcJ.js";let y=!1;const t=f(),c=f(),s=f(),b=new Map;let d=[];const i=e=>Array.isArray(e)?e.map(l=>l.toLowerCase()):[e.toLowerCase()],p=e=>l=>{const n=l.target,a=n.tagName==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(n.type);if(!(n.isContentEditable||(a||n.tagName==="TEXTAREA"||n.tagName==="SELECT")&&!n.readOnly))return e(l)},v=e=>{(!e.action||e.action==="keypress")&&t.add(...i(e.keys),e.callback),e.action==="keyup"&&c.add(...i(e.keys),e.callback),e.action==="keydown"&&s.add(...i(e.keys),e.callback)},m=e=>{(!e.action||e.action==="keypress")&&t.remove(...i(e.keys),e.callback),e.action==="keyup"&&c.remove(...i(e.keys),e.callback),e.action==="keydown"&&s.remove(...i(e.keys),e.callback)},E=e=>{var l,n,a;const r=f();r.add(...i(e.keys),e.callback),(n=(l=e.ref)==null?void 0:l.current)==null||n.addEventListener(e.action??"keypress",r.handle),b.set((a=e.ref)==null?void 0:a.current,r)},w=e=>{var l,n,a,r;if((l=e.ref)!=null&&l.current&&!e.disabled){const k=b.get((n=e.ref)==null?void 0:n.current);k.remove(...i(e.keys),e.callback),(r=(a=e.ref)==null?void 0:a.current)==null||r.removeEventListener(e.action??"keypress",k.handle)}},C=(e=[])=>{const[l,n]=o.useState([]);return o.useLayoutEffect(()=>{!y&&window!==void 0&&(window.addEventListener("keypress",t.handle),window.addEventListener("keyup",c.handle),window.addEventListener("keydown",s.handle),y=!0)},[]),o.useLayoutEffect(()=>(e.map(a=>{var r;a.disabled||(a.callback=p(a.callback),(r=a.ref)!=null&&r.current?(E(a),d=[...d,a]):a.ref||(v(a),d=[...d,a]))}),()=>{e.map(a=>{w(a),m(a),d=d.filter(r=>a!==r)})}),[e]),o.useEffect(()=>{n(d)},[]),l};function g(){try{return navigator.platform.toUpperCase().indexOf("MAC")>=0}catch{return!1}}function L(){return g()?"âŒ˜":"CTRL"}L();export{C as u};
